calculate_sovereign_wealth_fund = {

	#Compute size of Sovereign Wealth Fund
	set_variable = {
		name = sovereign_wealth_fund_gov_buildings
		value = 0
	}
	every_scope_building = {
		limit = {
			OR = { 
				has_active_production_method = pm_semi_privately_owned_building_agriculture
				has_active_production_method = pm_semi_publicly_traded_building_building_agriculture
				has_active_production_method = pm_semi_privately_owned_building_infrastructure
				has_active_production_method = pm_semi_publicly_traded_building_building_infrastructure
				has_active_production_method = pm_semi_privately_owned_building_logging
				has_active_production_method = pm_semi_publicly_traded_building_building_logging
				has_active_production_method = pm_semi_privately_owned_building_manufacturing
				has_active_production_method = pm_semi_publicly_traded_building_building_manufacturing
				has_active_production_method = pm_semi_privately_owned_building_mining
				has_active_production_method = pm_semi_publicly_traded_building_building_mining
				has_active_production_method = pm_semi_privately_owned_building_services
				has_active_production_method = pm_semi_publicly_traded_building_building_services
			}
		}
		owner = {
			change_variable = {
				name = sovereign_wealth_fund_gov_buildings
				add = 1
			}
		}
	}
	set_variable = {
		name = sovereign_wealth_fund_all_buildings
		value = 1
	}
	every_scope_building = {
		limit = {
			OR = { 
				is_building_group = bg_agriculture
				is_building_group = bg_logging
				is_building_group = bg_mining
				is_building_group = bg_manufacturing
				is_building_group = bg_infrastructure
				is_building_group = bg_service
			}
		}
		owner = {
			change_variable = {
				name = sovereign_wealth_fund_all_buildings
				add = 1
			}
		}
	}
	set_variable = {
		name = sovereign_wealth_fund_proportion
		value = root.var:sovereign_wealth_fund_gov_buildings
	}
	change_variable = {
		name = sovereign_wealth_fund_proportion
		divide = root.var:sovereign_wealth_fund_all_buildings
	}
	set_variable = {
		name = sovereign_wealth_fund_size
		value = root.investment_pool
	}
	change_variable = {
		name = sovereign_wealth_fund_size
		multiply = root.var:sovereign_wealth_fund_proportion
	}
	
	#Can only withdraw or deposit 1/100 of the Sovereign Wealth Fund per month
	set_variable = {
		name = sovereign_wealth_fund_withdrawal_amount
		value = root.var:sovereign_wealth_fund_size
	}
	change_variable = {
		name = sovereign_wealth_fund_withdrawal_amount
		divide = 100
	}
	
	#For diplay only
	set_variable = {
		name = sovereign_wealth_fund_size_display
		value = root.var:sovereign_wealth_fund_size
	}
	change_variable = {
		name = sovereign_wealth_fund_size_display
		divide = 1000000
	}

}